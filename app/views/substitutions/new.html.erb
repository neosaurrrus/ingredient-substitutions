<h1>Add a New Substitution</h1>

<% if @substitution.errors.any? %>
  <div id="error_explanation">
    <h3 class="error-text">
      <%= pluralize(@substitution.errors.count, "error") %>
      prohibited your substitution from being created:
    </h3>
 
    <ul>
    <% @substitution.errors.full_messages.each do |message| %>
      <li><%= message %></li>
    <% end %>
    </ul>
  </div>
<% end %>

    <%= form_for @substitution do |s| %>

       <div class="form-section">
            <h2>Existing Original Ingredient</h2>
            <em>What are you swapping out?</em>
            <%= s.collection_select :original_id, Ingredient.all, :id, :name , :prompt => 'Select or add new Ingredient below' %><br>

                <h4> New original ingredient</h4>
                <strong>Ingredient:</strong>
                 <%= s.fields_for :ingredient_original do |i| %>
                        <%= i.hidden_field :user_id, :value => current_user.id %>
                        <%= i.label :name %>
                        <%= i.text_field :name %>
                        <%= i.label :description %>
                        <%= i.text_field :description %>
                        <%= i.label :vegan %>
                        <%= i.check_box :vegan %>
                        <%= i.label :vegetarian %>
                        <%= i.check_box :vegetarian %>
                        <%= i.collection_select :category_id, Category.all, :id, :name, :prompt => 'Select or add a new Category' %>
                 <% end %>
       </div>
                

           <div class="form-section">
            <h2>Substitution Ingredient</h2>
            <em>What are you swapping in?</em>
            <%= s.collection_select :sub_id, Ingredient.all, :id, :name, :prompt => 'Select or add new Ingredient below'%><br>
                 <h4> New substitution ingredient</h4>
                <strong>Ingredient:</strong>
                 <%= s.fields_for :ingredient_sub do |i| %>
                           <%= i.hidden_field :user_id, :value => current_user.id %>
                        <%= i.label :name %>
                        <%= i.text_field :name %>
                        <%= i.label :description%>
                        <%= i.text_field :description%>
                        <%= i.label :vegan %>
                        <%= i.check_box :vegan %>
                        <%= i.label :vegetarian %>
                        <%= i.check_box :vegetarian %>
                        <%= i.collection_select :category_id, Category.all, :id, :name, :prompt => 'Select or add a new Category' %>
                 <% end %><br>
       </div>

        <div class="form-section">  
              <h2>Other Details</h2>
              <%= s.hidden_field :user_id, :value => current_user.id %>
              <%= s.label :same_quantity, "Should you use a 1:1 ratio?"%>
              <%= s.check_box :same_quantity %><br>
              <%= s.label :description, "Provide futher details if needed" %><br>
              <%= s.text_field :description %><br>
              <%= s.label :issues, "Any issues to consider?" %><br>
              <%= s.text_field :issues %><br>
              <%= s.submit "Submit Substitution" %>
       </div>

    <% end %>




